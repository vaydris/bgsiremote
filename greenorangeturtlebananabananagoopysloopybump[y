-- Pet Spawner GUI for BGSI

print("Pet Spawner GUI Loaded!")

-- Create GUI Elements
local ScreenGui = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local TextBox = Instance.new("TextBox")
local SpawnButton = Instance.new("TextButton")
local CloseButton = Instance.new("TextButton")  -- Close button (X)

-- Set up the ScreenGui
ScreenGui.Parent = game.Players.LocalPlayer.PlayerGui
ScreenGui.Name = "PetSpawnerGUI"

-- Set up the Frame
Frame.Parent = ScreenGui
Frame.Size = UDim2.new(0, 300, 0, 200)
Frame.Position = UDim2.new(0.5, -150, 0.5, -100)
Frame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)

-- Set up the Close Button (X)
CloseButton.Parent = Frame
CloseButton.Size = UDim2.new(0, 30, 0, 30)
CloseButton.Position = UDim2.new(1, -40, 0, 10)
CloseButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
CloseButton.Text = "X"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.TextSize = 20

-- Set up the TextBox (for entering the pet name)
TextBox.Parent = Frame
TextBox.Size = UDim2.new(0, 260, 0, 40)
TextBox.Position = UDim2.new(0, 20, 0, 40)
TextBox.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
TextBox.Text = "Enter Pet Name"
TextBox.TextColor3 = Color3.fromRGB(0, 0, 0)

-- Set up the SpawnButton
SpawnButton.Parent = Frame
SpawnButton.Size = UDim2.new(0, 260, 0, 40)
SpawnButton.Position = UDim2.new(0, 20, 0, 100)
SpawnButton.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
SpawnButton.Text = "Spawn Pet"
SpawnButton.TextColor3 = Color3.fromRGB(255, 255, 255)

-- Make the Frame draggable
local dragging = false
local dragInput, dragStart, startPos

Frame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = Frame.Position
    end
end)

Frame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement and dragging then
        local delta = input.Position - dragStart
        Frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

Frame.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)

-- Close Button functionality (X to close the GUI)
CloseButton.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()  -- This destroys the entire GUI
    print("Pet Spawner GUI closed.")
end)

-- Function to spawn the pet
local function spawnPet(petName)
    local replicatedStorage = game:GetService("ReplicatedStorage")
    local petsFolder = replicatedStorage:WaitForChild("Pets")

    -- Check if the pet exists in the folder
    local pet = petsFolder:FindFirstChild(petName)

    if pet then
        print("Pet found successfully: " .. petName)
        
        -- Replace this with the actual remote event name if needed
        local spawnRemote = replicatedStorage:WaitForChild("SpawnPet")
        
        spawnRemote:FireServer(pet)
        
        print(petName .. " has been spawned successfully!")
    else
        print("Pet not found! Please check the pet name and try again.")
    end
end

-- Button click event to spawn the pet
SpawnButton.MouseButton1Click:Connect(function()
    local petName = TextBox.Text
    if petName ~= "" then
        spawnPet(petName)
    else
        print("Please enter a valid pet name.")
    end
end)
