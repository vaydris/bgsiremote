-- BGSI Ultimate Script Hub (GUI + Features)
-- Runs on DELTA Executor

-- OrionLib setup
local OrionLib = loadstring(game:HttpGet("https://raw.githubusercontent.com/shlexware/Orion/main/source"))()
local Window = OrionLib:MakeWindow({Name = "BGSI Hub | Ultimate", HidePremium = false, SaveConfig = true, ConfigFolder = "BGSI_Hub"})

-- Variables
local autoBlow = false
local autoSell = false
local antiAfk = false
local autoFarm = false
local autoFarmDelay = 3

-- Tabs
local farmingTab = Window:MakeTab({Name = "Farming", Icon = "rbxassetid://4483345998", PremiumOnly = false})
local miscTab = Window:MakeTab({Name = "Misc", Icon = "rbxassetid://4483345998", PremiumOnly = false})

-- Functions
function blowBubbles()
    while autoBlow do
        game:GetService("ReplicatedStorage").Events.BlowBubble:FireServer()
        wait(0.1)
    end
end

function sellBubbles()
    while autoSell do
        game:GetService("ReplicatedStorage").Events.SellBubble:InvokeServer()
        wait(1)
    end
end

function runAntiAfk()
    while antiAfk do
        game:GetService("VirtualInputManager"):SendKeyEvent(true, "Space", false, game)
        wait(1)
        game:GetService("VirtualInputManager"):SendKeyEvent(false, "Space", false, game)
        wait(60 * 18) -- 18 minutes
    end
end

function runAutoFarm()
    while autoFarm do
        for _, v in pairs(workspace:GetDescendants()) do
            if v:IsA("TouchTransmitter") and v.Parent then
                firetouchinterest(game.Players.LocalPlayer.Character.HumanoidRootPart, v.Parent, 0)
                firetouchinterest(game.Players.LocalPlayer.Character.HumanoidRootPart, v.Parent, 1)
            end
        end
        wait(autoFarmDelay)
    end
end

-- Farming tab toggles
farmingTab:AddToggle({
    Name = "Auto Blow Bubbles",
    Default = false,
    Callback = function(value)
        autoBlow = value
        if value then
            spawn(blowBubbles)
        end
    end
})

farmingTab:AddToggle({
    Name = "Auto Sell Bubbles",
    Default = false,
    Callback = function(value)
        autoSell = value
        if value then
            spawn(sellBubbles)
        end
    end
})

farmingTab:AddToggle({
    Name = "Auto Farm Gems/Coins",
    Default = false,
    Callback = function(value)
        autoFarm = value
        if value then
            spawn(runAutoFarm)
        end
    end
})

farmingTab:AddSlider({
    Name = "Auto Farm Delay (Seconds)",
    Min = 3,
    Max = 60,
    Default = 5,
    Increment = 1,
    ValueName = "s",
    Callback = function(value)
        autoFarmDelay = value
    end
})

-- Misc tab
miscTab:AddToggle({
    Name = "Anti-AFK",
    Default = false,
    Callback = function(value)
        antiAfk = value
        if value then
            spawn(runAntiAfk)
        end
    end
})

OrionLib:Init()
