-- Server-side Pet Spawner
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local ServerStorage = game:GetService("ServerStorage")

-- Create RemoteEvent if missing
local spawnEvent = ReplicatedStorage:FindFirstChild("SpawnPetEvent")
if not spawnEvent then
    spawnEvent = Instance.new("RemoteEvent")
    spawnEvent.Name = "SpawnPetEvent"
    spawnEvent.Parent = ReplicatedStorage
end

-- Setup inventory folder for each player
game.Players.PlayerAdded:Connect(function(player)
    if not player:FindFirstChild("Inventory") then
        local inv = Instance.new("Folder")
        inv.Name = "Inventory"
        inv.Parent = player
    end
end)

-- When client requests a pet
spawnEvent.OnServerEvent:Connect(function(player, petName)
    if petName == "King Doggy" then
        local petTemplate = ServerStorage:FindFirstChild("Pets") and ServerStorage.Pets:FindFirstChild("King Doggy")
        if petTemplate then
            local petClone = petTemplate:Clone()
            petClone.Name = "King Doggy"
            petClone.Parent = player.Inventory
            print(player.Name .. " was given King Doggy!")
        else
            warn("King Doggy model not found in ServerStorage.Pets")
        end
    else
        warn(player.Name .. " tried to spawn an unknown pet: " .. petName)
    end
end)
